{% extends 'student/studentbase.html' %}
{% load static %}

{% block content %}
<div class="container my-5">
  <div class="card">
    <div class="card-header bg-primary text-white">
      <h3 class="card-title text-center">{{ quiz.quiz_name }}</h3>
    </div>
    <div class="card-body">
      <form class="form" autocomplete="off" onsubmit="return saveAns()" action="/student/calculate-marks" method="POST">
        {% csrf_token %}
        {% for q in questions %}
        <div class="mb-4">
          <h4 class="text-info">{{ forloop.counter }}. {{ q.question }}</h4>
          <h5 class="text-end">[Marks {{ q.marks }}]</h5>

          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ forloop.counter }}-option1"
              value="Option1">
            <label class="form-check-label" for="{{ forloop.counter }}-option1">
              {{ q.option1 }}
            </label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ forloop.counter }}-option2"
              value="Option2">
            <label class="form-check-label" for="{{ forloop.counter }}-option2">
              {{ q.option2 }}
            </label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ forloop.counter }}-option3"
              value="Option3">
            <label class="form-check-label" for="{{ forloop.counter }}-option3">
              {{ q.option3 }}
            </label>
          </div>

          <div class="form-check">
            <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{ forloop.counter }}-option4"
              value="Option4">
            <label class="form-check-label" for="{{ forloop.counter }}-option4">
              {{ q.option4 }}
            </label>
          </div>
        </div>
        {% endfor %}
        <button class="btn btn-info btn-lg w-100" type="submit">Submit</button>
      </form>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
  function saveAns() {
    var ele = document.getElementsByTagName('input');
    for (var i = 0; i < ele.length; i++) {
      if (ele[i].type === "radio") {
        if (ele[i].checked) {
          setCookie(ele[i].name, ele[i].value, 3);
        }
      }
    }
  }

  function setCookie(cname, cvalue, exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = "expires=" + d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }
</script>
{% endblock content %}